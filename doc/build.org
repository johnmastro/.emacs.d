#    -*- mode: org -*-

* Building Emacs from source
  I often forget the names of dependencies for features I want, and the
  arguments to give `configure'.

  The below assumes Debian (or derived), but it's enough info to remind me of what
  I'm doing for other builds too.
  
** GTK3
#+BEGIN_SRC sh
  sudo aptitude install build-essential pkg-config m4 \
    automake libtool texinfo install-info \
    libncurses-dev \
    libgtk-3-dev \
    libxml2 libxml2-dev \
    libgnutls28 libgnutls28-dev \
    zlib1g zlib1g-dev
  ./autogen.sh  # Only necessary if building from the repo
  ./configure --with-xml2 --with-zlib --with-gnutls --with-x-toolkit=gtk3
#+END_SRC

** No X
#+BEGIN_SRC sh
  sudo aptitude install build-essential pkg-config m4 \
    automake libtool texinfo install-info \
    libncurses-dev \
    libxml2 libxml2-dev \
    libgnutls28 libgnutls28-dev \
    zlib1g zlib1g-dev
  ./autogen.sh  # Only necessary if building from the repo
  ./configure --with-xml2 --with-zlib --with-gnutls \
    --with-x-toolkit=no \
    --without-xpm --without-jpeg --without-tiff --without-gif --without-png
#+END_SRC

** Cygwin --with-w32
- If building from the repo, make sure the files have Unix-style line endings.
  Make sure the tree is clean first, since we'll need to delete everything and
  check it back out.
  #+BEGIN_SRC sh
  git config core.autocrlf false
  git rm --cached -r .
  git reset --hard
  #+END_SRC
- Use setup-x86{,_64}.exe to install dependencies:
  - autoconf
  - automake
  - gcc-core
  - libncurses-devel
  - libxml2-devel
  - libgnutls-devel
  - zlib-devel
  - libjpeg-devel
  - libgif-devel
  - libpng-devel
  - libtiff-devel
- Build it:
  #+BEGIN_SRC sh
    ./autogen.sh  # Only necessary if building from the repo
    ./configure --with-w32 --with-xml2 --with-zlib --with-gnutls
  #+END_SRC
